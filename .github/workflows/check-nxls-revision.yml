name: Check nxls revision

on:
  pull_request:
    branches: [main]
    paths:
      - 'lua/nx-console/nxls/revision.lua'
      - 'deps/nx-console'
      - 'scripts/check-nxls-revision'
      - '.github/workflows/check-nxls-revision.yml'

jobs:
  check-revision:
    name: Verify nxls revision matches submodule and release exists
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v5
        with:
          submodules: true

      - name: Run revision check
        run: ./scripts/check-nxls-revision
